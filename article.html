<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Article Details</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    
    <!-- No external dependencies needed - fully static -->
    
    <style>
        body {
            font-family: 'Times New Roman', Times, serif;
            scroll-behavior: smooth;
        }

        /* Minimalist look */
        .reading-progress {
            position: fixed;
            top: 0;
            left: 0;
            height: 3px;
            background: linear-gradient(90deg, #a855f7, #7c3aed); /* purple gradient */
            z-index: 100;
            transition: width 0.3s ease;
        }

        .article-header {
            padding-top: 3rem;
            padding-bottom: 3rem;
            background: #ffffff;
        }
        .article-title {
            font-size: 2.25rem; /* text-4xl */
            line-height: 1.2;
            font-weight: 800;
            color: #0f172a; /* slate-900 */
            letter-spacing: -0.02em;
        }
        .article-subtitle { /* description */
            color: #475569; /* slate-600 */
        }
        .meta-line {
            color: #6b7280; /* gray-500 */
            font-size: 0.9375rem;
        }

        .article-content {
            font-size: 1.125rem;
            line-height: 1.8;
            color: #374151;
        }
        .article-content h1,
        .article-content h2,
        .article-content h3 {
            color: #111827;
            margin-top: 2.5rem;
            margin-bottom: 1rem;
            font-weight: 700;
        }
        .article-content h1 { font-size: 2rem; }
        .article-content h2 {
            font-size: 1.5rem;
            border-bottom: 1px solid #e5e7eb;
            padding-bottom: 0.25rem;
        }
        .article-content h3 { font-size: 1.25rem; }
        .article-content p { margin-bottom: 1.25rem; }

        .article-content blockquote {
            border-left: 3px solid #cbd5e1; /* slate-300 */
            padding: 0.75rem 1rem;
            margin: 1.5rem 0;
            color: #334155; /* slate-700 */
            background: #f8fafc; /* slate-50 */
        }

        .article-content code {
            background-color: #f1f5f9;
            padding: 0.125rem 0.375rem;
            border-radius: 0.25rem;
            font-family: 'Menlo', 'Monaco', 'Courier New', monospace;
            font-size: 0.875rem;
            color: #0f172a;
        }
        .article-content pre {
            background-color: #0f172a;
            color: #f8fafc;
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            margin: 1.25rem 0;
        }
        .article-content pre code { background: none; color: inherit; padding: 0; }

        /* Tags removed - styles intentionally omitted */

        .related-articles {
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            padding: 1.25rem;
            margin-top: 2rem;
            background: #ffffff;
        }
        .related-article-card {
            border: 1px solid #f1f5f9;
            border-radius: 0.5rem;
            padding: 0.75rem;
            transition: background-color 0.2s ease;
            cursor: pointer;
        }
        .related-article-card:hover { background-color: #f8fafc; }

        .back-link {
            color: #475569;
            font-size: 0.9375rem;
        }
        .back-link:hover { color: #0f172a; }

        .back-to-top {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: #0f172a;
            color: white;
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 50;
        }
        .back-to-top.visible { opacity: 1; }

        .loading-spinner {
            display: inline-block;
            width: 2rem;
            height: 2rem;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #0f172a;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        nav {
            position: sticky;
            top: 0;
            z-index: 50;
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }

        .article-image {
            border-radius: 0.75rem;
            margin: 1.5rem 0;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">
    <!-- Reading Progress Bar -->
    <div class="reading-progress" id="reading-progress"></div>

    <nav class="shadow-md">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="index.html" class="text-2xl font-bold text-sky-600">Fitzgerald Snow</a>
            <div class="hidden md:flex space-x-4">
                <a href="index.html#about" class="text-slate-600 hover:text-sky-500 transition-colors">About me</a>
                <a href="research.html" class="text-slate-600 hover:text-sky-500 transition-colors">Research</a>
                <a href="thoughts.html" class="text-slate-600 hover:text-sky-500 transition-colors">Thoughts</a>
                <a href="music.html" class="text-slate-600 hover:text-sky-500 transition-colors">Music</a>
                <a href="gallery.html" class="text-slate-600 hover:text-sky-500 transition-colors">Gallery</a>
                <a href="index.html#contact" class="text-slate-600 hover:text-sky-500 transition-colors">Contact me</a>
            </div>
            <button class="md:hidden" onclick="toggleMobileMenu()">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            </button>
        </div>
    </nav>

    <!-- Loading State -->
    <div id="loading-state" class="flex items-center justify-center min-h-screen">
        <div class="text-center">
            <div class="loading-spinner mx-auto mb-4"></div>
            <p class="text-slate-600">Loading article...</p>
        </div>
    </div>

    <!-- Main Content (Hidden initially) -->
    <div id="main-content" style="display: none;">
        <!-- Minimal Header -->
        <header class="article-header">
            <div class="container mx-auto px-6">
                <div class="max-w-3xl mx-auto">
                    <a href="research.html#neuroscience" class="inline-flex items-center back-link mb-4">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                        </svg>
                        Back to Neuroscience
                    </a>
                    <h1 id="article-title" class="article-title mb-3 text-center">Article Title</h1>
                    <p id="article-description" class="article-subtitle text-center text-lg mb-3"></p>
                    <div class="meta-line text-center">
                        <span id="article-date">Loading...</span>
                        <span class="mx-2">â€¢</span>
                        <span id="read-time">5 min read</span>
                        <span class="mx-2">â€¢</span>
                        <span id="article-category">Research</span>
                    </div>
                </div>
            </div>
        </header>

        <main class="py-16 md:py-24">
            <div class="container mx-auto px-6">
                <div class="max-w-3xl mx-auto">

                    <!-- Article Image (if exists) -->
                    <div id="article-image-container" class="mb-8" style="display: none;">
                        <img id="article-image" class="w-full article-image" alt="Article cover">
                    </div>

                    <!-- Article Content -->
                    <article id="article-content" class="article-content">
                        <!-- Content will be loaded here -->
                    </article>

                    <!-- Related Articles -->
                    <div id="related-articles" class="related-articles" style="display: none;">
                        <h3 class="text-2xl font-bold text-slate-800 mb-6">ç›¸å…³æ–‡ç« </h3>
                        <div id="related-articles-list" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Related articles will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Error State -->
    <div id="error-state" class="flex items-center justify-center min-h-screen" style="display: none;">
        <div class="text-center max-w-md mx-auto px-6">
            <div class="text-6xl mb-6">ğŸ“„</div>
            <h1 class="text-3xl font-bold text-slate-800 mb-4">æ–‡ç« æœªæ‰¾åˆ°</h1>
            <p class="text-slate-600 mb-8">æŠ±æ­‰ï¼Œæ‚¨è¦æŸ¥æ‰¾çš„æ–‡ç« ä¸å­˜åœ¨æˆ–å·²è¢«åˆ é™¤ã€‚</p>
            <a href="research.html" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors">
                è¿”å›ç ”ç©¶é¡µé¢
            </a>
        </div>
    </div>

    <!-- Back to Top Button -->
    <button class="back-to-top" id="back-to-top" onclick="scrollToTop()">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path>
        </svg>
    </button>

    <footer class="bg-slate-800 text-slate-300 py-10 text-center">
        <div class="container mx-auto px-6">
            <p>&copy; <span id="currentYear"></span> Fitzgerald Snow. All rights reserved.</p>
            <p class="text-sm mt-2">Powered by Tailwind CSS</p>
        </div>
    </footer>

    <script>
        document.getElementById('currentYear').textContent = new Date().getFullYear();

        // Global variables
        let currentArticle = null;

        // Get URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const articleId = urlParams.get('id');
        const articleType = urlParams.get('type') || 'article';

        // Initialize the page
        async function initializePage() {
            try {
                loadArticle(articleId, articleType);
                initializeScrollFeatures();
                loadRelatedArticles();
            } catch (error) {
                console.error('Failed to initialize page:', error);
                showErrorState();
            }
        }

        // Load article from static data
        function loadArticle(id, type) {
            if (!id) {
                showErrorState();
                return;
            }

            const staticArticle = getStaticArticle(id, type);
            if (staticArticle) {
                displayArticle(staticArticle);
            } else {
                showErrorState();
            }
        }

        // Get static article data
        function getStaticArticle(id, type) {
            const articles = {
                'neural-dynamics-learning': {
                    title: 'æƒ…ç»ªæ˜¯å¤§è„‘å»ºæ„çš„äº§ç‰©',
                    description: 'æƒ…ç»ªä¸æ˜¯å¯¹ä¸–ç•Œçš„è¢«åŠ¨ååº”ã€‚å®ƒä»¬æ˜¯å¤§è„‘åŸºäºè¿‡å¾€ç»éªŒï¼Œå¯¹â€œå½“å‰èº«ä½“æ„Ÿè§‰åœ¨ç‰¹å®šæƒ…å¢ƒä¸‹æ„å‘³ç€ä»€ä¹ˆâ€çš„æœ€ä½³çŒœæµ‹å’Œè¡ŒåŠ¨æŒ‡å—ã€‚',
                    content: `
                        <h2>æ ¸å¿ƒè§‚ç‚¹</h2>
                        <p>æ„å»ºæ€§æƒ…ç»ªç†è®ºè®¤ä¸ºï¼šæˆ‘ä»¬ä½“éªŒåˆ°çš„â€œæ„¤æ€’â€â€œææƒ§â€ç­‰å¹¶éç¡¬ç¼–ç çš„æ¨¡å—è¾“å‡ºï¼Œè€Œæ˜¯å¤§è„‘åŸºäº<strong>å†…æ„Ÿå—</strong>ã€æƒ…å¢ƒä¸è¿‡å¾€ç»éªŒæ‰€åšçš„æœ€ä½³æ¨æ–­ã€‚æƒ…ç»ªæ—¢æ˜¯å¯¹å½“ä¸‹å†…å¤–éƒ¨çŠ¶æ€çš„è§£é‡Šï¼Œä¹Ÿæ˜¯éšä¹‹è€Œæ¥çš„è¡ŒåŠ¨å€¾å‘ã€‚</p>

                        <h2>é¢„æµ‹ç¼–ç ä¸å†…æ„Ÿå—</h2>
                        <p>åœ¨é¢„æµ‹åŠ å·¥æ¡†æ¶ä¸­ï¼Œå¤§è„‘æŒç»­é¢„æµ‹èº«ä½“ä¿¡å·ï¼ˆå‘¼å¸ã€å¿ƒç‡ã€çš®ç”µç­‰ï¼‰ä¸å¤–ç•Œè¾“å…¥ï¼Œå¹¶ç”¨é¢„æµ‹è¯¯å·®æ›´æ–°å†…éƒ¨æ¨¡å‹ã€‚å†…æ„Ÿå—çš„å…ˆéªŒä¸æƒ…å¢ƒçº¿ç´¢å…±åŒå¡‘é€ äº†æƒ…ç»ªèŒƒç•´ã€‚</p>

                        <h2>å®è¯çº¿ç´¢</h2>
                        <ul>
                            <li>åŒä¸€ç§æƒ…ç»ªæ ‡ç­¾åœ¨ä¸åŒä¸ªä½“å’Œåœºæ™¯ä¸‹çš„ç”Ÿç†æ¨¡å¼å·®å¼‚å·¨å¤§ã€‚</li>
                            <li>è¯­ä¹‰ä¸æ–‡åŒ–å­¦ä¹ èƒ½æ”¹å˜æƒ…ç»ªç±»åˆ«è¾¹ç•Œä¸è¡¨è¾¾ã€‚</li>
                            <li>æ“çºµæœŸå¾…ä¸æƒ…å¢ƒè§£é‡Šå¯æ˜¾è‘—æ”¹å˜ä¸»è§‚æƒ…ç»ªã€‚</li>
                        </ul>

                        <h2>ä¸AIçš„è”ç³»</h2>
                        <p>å°†æƒ…ç»ªè§†ä¸ºç”±ç”Ÿæˆæ¨¡å‹äº§ç”Ÿçš„<strong>å†…åœ¨çŠ¶æ€ä¼°è®¡</strong>ï¼Œå¯ä¸ä¸»åŠ¨æ¨æ–­/æ§åˆ¶æ¡†æ¶è€¦åˆï¼šæƒ…ç»ªå½±å“ä»£ä»·ã€åŠ¨æœºä¸æ¢ç´¢-åˆ©ç”¨æƒè¡¡ã€‚</p>

                        <h2>ç»“è¯­</h2>
                        <p>â€œæƒ…ç»ªæ˜¯å»ºæ„çš„â€å¹¶ä¸å‰Šå¼±å…¶çœŸå®æ€§ï¼›ç›¸åï¼Œå®ƒå¼ºè°ƒäº†å­¦ä¹ ã€è¯­å¢ƒä¸èº«ä½“åœ¨æ™ºèƒ½ç³»ç»Ÿä¸­çš„åŸºç¡€åœ°ä½ã€‚</p>
                    `,
                    date: '2025-08-23',
                    category: 'Neuroscience',
                    tags: ['emotion', 'predictive-processing', 'constructivism'],
                    readTime: '6 min read'
                },
                'consciousness-mathematical-framework': {
                    title: 'è®¤çŸ¥ç§‘å­¦é‡ä¸Šå¼ºåŒ–å­¦ä¹ ï¼ˆä¸Šï¼‰',
                    description: 'Goals and Habits in the Brain. Are we of two minds?',
                    content: `
                        <h2>å¼•è¨€</h2>
                        <p>ä»â€œç›®æ ‡å¯¼å‘ï¼ˆmodel-basedï¼‰â€ä¸â€œä¹ æƒ¯ï¼ˆmodel-freeï¼‰â€çš„äºŒå…ƒè§†è§’é‡è®¿å†³ç­–ï¼šæˆ‘ä»¬æ˜¯å¦çœŸæœ‰ä¸¤å¥—ç³»ç»Ÿï¼Ÿè¿˜æ˜¯åœ¨å…±äº«èµ„æºçº¦æŸä¸‹çš„ç†æ€§åˆ†å·¥ï¼Ÿ</p>

                        <h2>ä¸ç¡®å®šæ€§ä¸ä»£ä»·</h2>
                        <p>æ–‡çŒ®è¡¨æ˜ï¼Œæ§åˆ¶æƒçš„åˆ†é…ä¸é¢„æµ‹ä¸ç¡®å®šæ€§ã€è®¡ç®—ä»£ä»·å’Œä»»åŠ¡ç»“æ„å¯†åˆ‡ç›¸å…³ã€‚å¯é æ€§åŠ æƒä¸æˆæœ¬-æ•ˆç›Šæƒè¡¡æä¾›äº†ç»Ÿä¸€çš„è§£é‡Šæ¡†æ¶ã€‚</p>

                        <h2>ä¸¤é˜¶æ®µä»»åŠ¡ä¸è¯æ®</h2>
                        <p>ä»¥ä¸¤é˜¶æ®µä»»åŠ¡ä¸ºä¾‹ï¼Œè¡Œä¸ºä¸ååº”æ—¶å¯è¢«ç®€æ´çš„æŸå¤±/ä»£ä»·æ¨¡å‹è§£é‡Šï¼Œè€Œæ— éœ€å¤æ‚çš„ä»²è£å™¨ç»†èŠ‚ã€‚</p>

                        <h2>å°ç»“</h2>
                        <p>â€œä¸¤ç³»ç»Ÿâ€æ›´åƒæ˜¯ç®—æ³•è¿‘ä¼¼ä¸èµ„æºåˆ†é…çš„æŠ˜ä¸­è§†è§’â€”â€”ä¸Šç¯‡èšç„¦åŸåˆ™ï¼Œä¸‹ç¯‡å°†è®¨è®ºå®ç°ä¸å­¦ä¹ ã€‚</p>
                    `,
                    date: '2025-09-07',
                    category: 'Neuroscience',
                    tags: ['model-based', 'model-free', 'arbitration'],
                    readTime: '7 min read'
                },
                'memory-computational-models': {
                    title: 'è®¤çŸ¥ç§‘å­¦é‡ä¸Šå¼ºåŒ–å­¦ä¹ ï¼ˆä¸­ï¼‰',
                    description: 'Goals and Habits in the Brain. Are we of two minds?',
                    content: `
                        <h2>å­¦ä¹ åˆ°ä»²è£</h2>
                        <p>ä»ç»éªŒä¸­å­¦ä¹ â€œä½•æ—¶è§„åˆ’ã€ä½•æ—¶ä¹ æƒ¯â€çš„å…ƒç­–ç•¥ï¼Œå¯è§†ä¸ºä¸€ç§<strong>å…ƒå¼ºåŒ–å­¦ä¹ </strong>ã€‚å‰é¢å¶-çº¹çŠ¶ä½“å›è·¯å¯èƒ½å®ç°äº†è¿™ç§å¿«é€Ÿé€‚åº”ã€‚</p>

                        <h2>è¡¨ç¤ºä¸å·¥ä½œè®°å¿†</h2>
                        <p>ä»»åŠ¡è¡¨ç¤ºä¸å·¥ä½œè®°å¿†å¸¦å®½ç›´æ¥å½±å“MBæ€§èƒ½ï¼›åœ¨æœ‰é™èµ„æºä¸‹ï¼Œ<em>å‹ç¼©çš„ä¸–ç•Œæ¨¡å‹</em>ä¸å¯å‘å¼æœç´¢è¶³ä»¥è·å¾—é«˜æ€§ä»·æ¯”ã€‚</p>

                        <h2>æ›´å¥½çš„ä»»åŠ¡</h2>
                        <p>ä»…é ä¸¤é˜¶æ®µä»»åŠ¡éš¾ä»¥åŒºåˆ†å‡è®¾ã€‚éœ€è¦èƒ½æ“çºµç»“æ„å¯è§‚æµ‹æ€§ã€è½¬æ¢ç¨€ç–æ€§ä¸è®¡ç®—é¢„ç®—çš„èŒƒå¼ã€‚</p>
                    `,
                    date: '2025-09-14',
                    category: 'Neuroscience',
                    tags: ['meta-RL', 'working-memory', 'representation'],
                    readTime: '7 min read'
                },
                'backpropagation-brain': {
                    title: 'è§„åˆ’æ˜¯ä¸€ç§æ¦‚ç‡æ¨æ–­',
                    description: 'Planning as Inference.',
                    content: `
                        <h2>æ§åˆ¶å³æ¨æ–­</h2>
                        <p>åœ¨æ§åˆ¶-å³-æ¨æ–­æ¡†æ¶ä¸­ï¼Œæœ€ä¼˜ç­–ç•¥å¯è½¬æ¢ä¸ºå¯¹è½¨è¿¹çš„åéªŒæ¨æ–­ï¼›åå¥½é€šè¿‡èƒ½é‡/æˆæœ¬é¡¹è¿›å…¥æ¦‚ç‡æ¨¡å‹ã€‚</p>

                        <h2>è½¯æœ€ä¼˜ä¸è‡ªç”±èƒ½</h2>
                        <p>æ¸©åº¦è°ƒèŠ‚çš„è½¯æœ€ä¼˜ï¼ˆsoft optimalityï¼‰è‡ªç„¶å¼•å‡ºç†µæ­£åˆ™åŒ–RLï¼Œä¸å˜åˆ†è‡ªç”±èƒ½ç›®æ ‡ç­‰ä»·ã€‚</p>

                        <h2>ç®—æ³•è”ç³»</h2>
                        <p>KLæ§åˆ¶ã€è·¯å¾„ç§¯åˆ†æ§åˆ¶ä¸æ¶ˆæ¯ä¼ é€’ä¸ºé«˜ç»´è§„åˆ’æä¾›äº†å…¼é¡¾ç¨³å®šæ€§ä¸æ•ˆç‡çš„è§£æ³•ã€‚</p>

                        <h2>åº”ç”¨</h2>
                        <p>å°†â€œè§„åˆ’=æ¨æ–­â€è½åœ°åˆ°å¯¼èˆªã€å±‚çº§æ§åˆ¶ä¸ä¸å®Œå…¨å¯è§‚æµ‹ç¯å¢ƒä¸­ï¼Œå¯è·å¾—é²æ£’çš„è¡Œä¸ºç”Ÿæˆã€‚</p>
                    `,
                    date: '2025-07-28',
                    category: 'Neuroscience',
                    tags: ['planning-as-inference', 'control', 'variational'],
                    readTime: '6 min read'
                }
            };

            const mathArticles = {
                'matrix-decomposition-explained': {
                    title: 'çŸ©é˜µåˆ†è§£æ–¹æ³•è¯¦è§£',
                    description: 'æ·±å…¥è®²è§£å„ç§çŸ©é˜µåˆ†è§£æ–¹æ³•çš„åŸç†ã€åº”ç”¨åœºæ™¯å’Œè®¡ç®—å®ç°',
                    content: `
                        <h2>SVDåˆ†è§£</h2>
                        <p>å¥‡å¼‚å€¼åˆ†è§£æ˜¯æœ€é‡è¦çš„çŸ©é˜µåˆ†è§£æ–¹æ³•ä¹‹ä¸€ï¼Œå¹¿æ³›åº”ç”¨äºé™ç»´ã€æ•°æ®å‹ç¼©ç­‰é¢†åŸŸã€‚</p>
                        
                        <h2>ç‰¹å¾å€¼åˆ†è§£</h2>
                        <p>é€‚ç”¨äºæ–¹é˜µçš„åˆ†è§£æ–¹æ³•ï¼Œåœ¨ä¸»æˆåˆ†åˆ†æä¸­å‘æŒ¥é‡è¦ä½œç”¨ã€‚</p>
                        
                        <h2>QRåˆ†è§£</h2>
                        <p>å°†çŸ©é˜µåˆ†è§£ä¸ºæ­£äº¤çŸ©é˜µå’Œä¸Šä¸‰è§’çŸ©é˜µçš„ä¹˜ç§¯ã€‚</p>
                    `,
                    date: '2024-12-01',
                    category: 'Mathematics',
                    tags: ['linear-algebra', 'optimization'],
                    readTime: '10 min read'
                },
                'entropy-information-theory': {
                    title: 'ç†µä¸ä¿¡æ¯è®ºåŸºç¡€',
                    description: 'ä»é¦™å†œç†µå¼€å§‹ï¼Œä»‹ç»ä¿¡æ¯è®ºçš„æ ¸å¿ƒæ¦‚å¿µ',
                    content: `
                        <h2>é¦™å†œç†µ</h2>
                        <p>ä¿¡æ¯è®ºçš„åŸºç¡€æ¦‚å¿µï¼Œé‡åŒ–ä¿¡æ¯çš„ä¸ç¡®å®šæ€§ã€‚</p>
                        
                        <h2>KLæ•£åº¦</h2>
                        <p>è¡¡é‡ä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒå·®å¼‚çš„é‡è¦å·¥å…·ã€‚</p>
                        
                        <h2>åœ¨æœºå™¨å­¦ä¹ ä¸­çš„åº”ç”¨</h2>
                        <p>äº¤å‰ç†µæŸå¤±å‡½æ•°ã€ä¿¡æ¯å¢ç›Šç­‰åœ¨AIä¸­çš„å…·ä½“åº”ç”¨ã€‚</p>
                    `,
                    date: '2024-11-15',
                    category: 'Mathematics',
                    tags: ['probability', 'information-theory'],
                    readTime: '8 min read'
                }
            };

            const bookNotes = {
                'neuroscience-emotion': {
                    title: 'The Neuroscience of Emotion - è¯»ä¹¦ç¬”è®°',
                    description: 'ç¥ç»ç³»ç»Ÿè®¾è®¡åŸç†çš„æ·±åº¦è§£è¯»',
                    author: 'Ralph Adolphs, David J. Anderson',
                    progress: 4,
                    content: `
                        <h2>ç¬¬ä¸€ç« ï¼šæƒ…æ„Ÿçš„ç¥ç»åŸºç¡€</h2>
                        <blockquote>
                            "æƒ…æ„Ÿä¸ä»…ä»…æ˜¯ä¸»è§‚ä½“éªŒï¼Œæ›´æ˜¯å¤§è„‘ä¿¡æ¯å¤„ç†çš„é‡è¦ç»„æˆéƒ¨åˆ†"
                        </blockquote>
                        <p>ä½œè€…ä»è¿›åŒ–çš„è§’åº¦åˆ†ææƒ…æ„Ÿçš„é€‚åº”æ€§ä»·å€¼ã€‚å…³é”®è§‚ç‚¹ï¼š</p>
                        <ul>
                            <li>æƒ…æ„Ÿæ˜¯å¿«é€Ÿå†³ç­–çš„é‡è¦æœºåˆ¶</li>
                            <li>ä¸åŒæƒ…æ„Ÿå¯¹åº”ä¸åŒçš„ç¥ç»å›è·¯</li>
                            <li>æƒ…æ„Ÿä¸è®¤çŸ¥çš„ç›¸äº’ä½œç”¨</li>
                        </ul>
                        
                        <h2>ä¸ªäººæ€è€ƒ</h2>
                        <p><strong>æ€è€ƒï¼š</strong>è¿™æœ¬ä¹¦è®©æˆ‘é‡æ–°ç†è§£äº†æƒ…æ„Ÿåœ¨æ™ºèƒ½ç³»ç»Ÿä¸­çš„ä½œç”¨ã€‚AIç³»ç»Ÿæ˜¯å¦éœ€è¦æƒ…æ„Ÿï¼Ÿæƒ…æ„Ÿå¦‚ä½•æé«˜å†³ç­–æ•ˆç‡ï¼Ÿ</p>
                    `,
                    date: 'æœ€åæ›´æ–°: 2024-12-01',
                    category: 'Book Notes',
                    tags: ['neuroscience', 'emotion', 'brain-design'],
                    readTime: '6 min read'
                }
            };

            if (type === 'book-notes') {
                return bookNotes[id];
            } else if (type === 'mathematics') {
                return mathArticles[id];
            } else {
                return articles[id];
            }
        }

        // Display article content
        function displayArticle(article) {
            currentArticle = article;
            
            // Update meta information
            document.title = `${article.title} - Fitzgerald Snow`;
            document.getElementById('article-title').textContent = article.title;
            document.getElementById('article-description').textContent = article.description || '';
            document.getElementById('article-date').textContent = formatDate(article.date || article.timestamp);
            document.getElementById('article-category').textContent = article.category || 'Research';
            document.getElementById('read-time').textContent = article.readTime || calculateReadTime(article.content);
            
            // Update tags (UI removed). Guard in case container exists in future.
            (function updateTags() {
                const tagsContainer = document.getElementById('article-tags');
                if (!tagsContainer) return; // no tags UI present
                if (article.tags && article.tags.length > 0) {
                    tagsContainer.innerHTML = article.tags.map(tag => `<span class="tag">${tag}</span>`).join('');
                } else {
                    tagsContainer.innerHTML = '';
                }
            })();
            
            // Update image if exists
            if (article.imageUrl) {
                const imageContainer = document.getElementById('article-image-container');
                const imageElement = document.getElementById('article-image');
                imageElement.src = article.imageUrl;
                imageElement.alt = article.title;
                imageContainer.style.display = 'block';
            }
            
            // Update content
            document.getElementById('article-content').innerHTML = article.content;
            
            // Show main content and hide loading
            document.getElementById('loading-state').style.display = 'none';
            document.getElementById('main-content').style.display = 'block';
        }

        // Show error state
        function showErrorState() {
            document.getElementById('loading-state').style.display = 'none';
            document.getElementById('error-state').style.display = 'flex';
        }

        // Show reading mode notice (removed - not needed for static version)
        function showReadingModeNotice() {
            // No longer needed - this is now the default mode
        }

        // Initialize scroll features
        function initializeScrollFeatures() {
            // Reading progress
            function updateReadingProgress() {
                const article = document.getElementById('article-content');
                if (!article) return;
                
                const rect = article.getBoundingClientRect();
                const articleHeight = article.offsetHeight;
                const viewportHeight = window.innerHeight;
                const scrolled = Math.max(0, -rect.top);
                const progress = Math.min(100, (scrolled / (articleHeight - viewportHeight)) * 100);
                
                document.getElementById('reading-progress').style.width = `${progress}%`;
            }

            // Back to top button
            function toggleBackToTop() {
                const button = document.getElementById('back-to-top');
                if (window.scrollY > 300) {
                    button.classList.add('visible');
                } else {
                    button.classList.remove('visible');
                }
            }

            window.addEventListener('scroll', () => {
                updateReadingProgress();
                toggleBackToTop();
            });
        }

        // Load related articles
        function loadRelatedArticles() {
            if (!currentArticle || !currentArticle.tags) return;
            
            // Static related articles
            const relatedContainer = document.getElementById('related-articles');
            const relatedList = document.getElementById('related-articles-list');
            
            // Simple related articles based on category
            const placeholders = [
                { 
                    id: 'consciousness-mathematical-framework', 
                    title: 'æ„è¯†çš„æ•°å­¦åŸºç¡€', 
                    description: 'æ¢è®¨æ„è¯†çš„æ•°å­¦å»ºæ¨¡æ¡†æ¶' 
                },
                { 
                    id: 'memory-computational-models', 
                    title: 'è®°å¿†çš„è®¡ç®—æ¨¡å‹', 
                    description: 'ä»æµ·é©¬ä½“åˆ°äººå·¥ç¥ç»ç½‘ç»œ' 
                }
            ];
            
            if (placeholders.length > 0) {
                relatedList.innerHTML = placeholders.map(article => `
                    <div class="related-article-card" onclick="window.location.href='article.html?id=${article.id}'">
                        <h4 class="font-semibold text-slate-800 mb-2">${article.title}</h4>
                        <p class="text-sm text-slate-600">${article.description}</p>
                    </div>
                `).join('');
                relatedContainer.style.display = 'block';
            }
        }

        // Utility functions
        function formatDate(date) {
            if (!date) return 'Unknown date';
            if (typeof date === 'string') return date;
            return date.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
        }

        function calculateReadTime(content) {
            const words = content.replace(/<[^>]*>/g, '').split(/\s+/).length;
            const minutes = Math.ceil(words / 200);
            return `${minutes} min read`;
        }

        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function shareArticle() {
            if (navigator.share && currentArticle) {
                navigator.share({
                    title: currentArticle.title,
                    text: currentArticle.description,
                    url: window.location.href
                });
            } else {
                navigator.clipboard.writeText(window.location.href);
                alert('é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
            }
        }

        function printArticle() {
            window.print();
        }

        function toggleMobileMenu() {
            // Mobile menu toggle - can be implemented as needed
            console.log('Toggle mobile menu');
        }

        // Initialize when page loads
        window.addEventListener('load', initializePage);

        // Handle navigation
        window.addEventListener('popstate', () => {
            const newUrlParams = new URLSearchParams(window.location.search);
            const newArticleId = newUrlParams.get('id');
            const newArticleType = newUrlParams.get('type') || 'article';
            
            if (newArticleId !== articleId) {
                location.reload();
            }
        });

        // Legacy compatibility for old URLs
        if (articleId && !articleType) {
            // Redirect old URLs to new format if needed
            console.log('Loading article:', articleId);
        }
    </script>

</body>
</html>
