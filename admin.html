<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Research Admin - Content Management</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    
    <!-- Pure static admin tool - no external dependencies -->
    <style>
        body {
            font-family: 'Times New Roman', Times, serif;
        }
        .admin-nav {
            position: sticky;
            top: 0;
            z-index: 50;
            background-color: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
        }
        .form-section {
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
        }
        .input-field {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 2px solid #e2e8f0;
            border-radius: 0.5rem;
            transition: border-color 0.3s ease;
        }
        .input-field:focus {
            outline: none;
            border-color: #0ea5e9;
            box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.1);
        }
        .btn-primary {
            background: linear-gradient(135deg, #0ea5e9, #06b6d4);
            color: white;
            padding: 0.75rem 2rem;
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 10px 20px rgba(14, 165, 233, 0.3);
        }
        .preview-card {
            border: 2px dashed #cbd5e1;
            border-radius: 0.75rem;
            padding: 1.5rem;
            background-color: #f8fafc;
        }
        .tag-input {
            display: inline-block;
            background: #e2e8f0;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            margin: 0.25rem;
            font-size: 0.875rem;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <nav class="admin-nav shadow-lg">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-4">
                <a href="research.html" class="text-xl font-bold text-white">â† Back to Research</a>
                <span class="text-slate-400">|</span>
                <h1 class="text-xl font-semibold text-white">Content Admin</h1>
            </div>
            <div class="text-sm text-slate-300">
                Simplified content management for research articles & notes
            </div>
        </div>
    </nav>

    <!-- Login Modal -->
    <div id="loginModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-8 max-w-sm w-full mx-4">
            <h2 class="text-2xl font-bold mb-4 text-center">Admin Access</h2>
            <div class="mb-4">
                <label class="block text-sm font-semibold mb-2">Password:</label>
                <input type="password" id="adminPassword" class="input-field" placeholder="Enter admin password">
            </div>
            <button class="btn-primary w-full" onclick="checkPassword()">Login</button>
            <div id="loginError" class="text-red-500 text-sm mt-2 text-center" style="display: none;">
                Incorrect password. Please try again.
            </div>
        </div>
    </div>

    <main class="container mx-auto px-6 py-8" id="mainContent" style="display: none;">
        
        <!-- Content Type Selector -->
        <div class="mb-8">
            <div class="flex flex-wrap gap-4 justify-center">
                <button class="btn-primary tab-btn active" data-type="neuroscience">Neuroscience Article</button>
                <button class="btn-primary tab-btn" data-type="mathematics">Mathematics Article</button>
                <button class="btn-primary tab-btn" data-type="book">Book Note</button>
            </div>
        </div>

        <!-- Article Form -->
        <div id="article-form" class="form-section">
            <h2 class="text-2xl font-bold mb-6 text-center">Add New Content</h2>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Form Fields -->
                <div class="space-y-6">
                    <div>
                        <label class="block text-sm font-semibold mb-2 text-slate-700">Title</label>
                        <input type="text" id="title" class="input-field" placeholder="Enter article title">
                    </div>

                    <div>
                        <label class="block text-sm font-semibold mb-2 text-slate-700">Description</label>
                        <textarea id="description" rows="4" class="input-field" placeholder="Brief description or abstract"></textarea>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-semibold mb-2 text-slate-700">Content</label>
                        <textarea id="content" rows="12" class="input-field" placeholder="Write your article content here... You can use HTML tags for formatting."></textarea>
                        <div class="text-xs text-slate-500 mt-1">
                            Tip: Use HTML tags like &lt;h2&gt;, &lt;p&gt;, &lt;ul&gt;, &lt;blockquote&gt; for formatting
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-semibold mb-2 text-slate-700">Tags (comma-separated)</label>
                        <input type="text" id="tags" class="input-field" placeholder="neural-networks, learning, review">
                        <div class="text-xs text-slate-500 mt-1">Available tags will appear as you type</div>
                    </div>

                    <div>
                        <label class="block text-sm font-semibold mb-2 text-slate-700">Image URL (optional)</label>
                        <input type="text" id="imageUrl" class="input-field" placeholder="https://example.com/image.jpg">
                    </div>

                    <!-- Book-specific fields -->
                    <div id="book-fields" class="space-y-4" style="display: none;">
                        <div>
                            <label class="block text-sm font-semibold mb-2 text-slate-700">Author</label>
                            <input type="text" id="author" class="input-field" placeholder="Author name">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold mb-2 text-slate-700">Reading Progress (%)</label>
                            <input type="number" id="progress" class="input-field" placeholder="25" min="0" max="100">
                        </div>
                    </div>

                    <div class="space-y-4">
                        <button class="btn-primary w-full" onclick="generatePreview()">ğŸ” Preview Article</button>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <button class="btn-primary" onclick="generateResearchCode()">ğŸ“„ Copy Research.html Code</button>
                            <button class="btn-primary" onclick="generateArticleCode()">ğŸ“ Copy Article.html Code</button>
                        </div>
                        
                        <div class="text-xs text-center text-slate-500 mt-2">
                            ç‚¹å‡»ä¸Šé¢ä¸¤ä¸ªæŒ‰é’®åˆ†åˆ«å¤åˆ¶ä»£ç åˆ°å¯¹åº”æ–‡ä»¶
                        </div>
                    </div>
                </div>

                <!-- Preview -->
                <div>
                    <label class="block text-sm font-semibold mb-2 text-slate-700">Preview</label>
                    <div id="preview" class="preview-card min-h-64">
                        <p class="text-slate-500 text-center">Fill in the form to see a preview</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Research.html Code Section -->
        <div id="research-code-section" class="form-section" style="display: none;">
            <h3 class="text-xl font-bold mb-4">ğŸ“„ Research.html ä»£ç </h3>
            <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-4">
                <p class="text-blue-800 text-sm">
                    <strong>ä½¿ç”¨è¯´æ˜ï¼š</strong>å¤åˆ¶ä¸‹é¢çš„ä»£ç ï¼Œç„¶åç²˜è´´åˆ° research.html æ–‡ä»¶çš„å¯¹åº”åŒºåŸŸä¸­
                </p>
            </div>
            <textarea id="research-code" rows="15" class="input-field font-mono text-sm" readonly></textarea>
            <div class="mt-4 flex gap-4">
                <button class="btn-primary" onclick="copyResearchCode()">ğŸ“‹ å¤åˆ¶ä»£ç </button>
                <button class="btn-primary" onclick="showResearchInstructions()">â„¹ï¸ æŸ¥çœ‹ç²˜è´´ä½ç½®</button>
            </div>
        </div>

        <!-- Article.html Code Section -->
        <div id="article-code-section" class="form-section" style="display: none;">
            <h3 class="text-xl font-bold mb-4">ğŸ“ Article.html ä»£ç </h3>
            <div class="bg-green-50 border-l-4 border-green-400 p-4 mb-4">
                <p class="text-green-800 text-sm">
                    <strong>ä½¿ç”¨è¯´æ˜ï¼š</strong>å¤åˆ¶ä¸‹é¢çš„ä»£ç ï¼Œç„¶åæ·»åŠ åˆ° article.html æ–‡ä»¶çš„ getStaticArticle å‡½æ•°ä¸­
                </p>
            </div>
            <textarea id="article-code" rows="15" class="input-field font-mono text-sm" readonly></textarea>
            <div class="mt-4 flex gap-4">
                <button class="btn-primary" onclick="copyArticleCode()">ğŸ“‹ å¤åˆ¶ä»£ç </button>
                <button class="btn-primary" onclick="showArticleInstructions()">â„¹ï¸ æŸ¥çœ‹ç²˜è´´ä½ç½®</button>
            </div>
        </div>

        <!-- Article Data Section -->
        <div id="article-data-section" class="form-section" style="display: none;">
            <h3 class="text-xl font-bold mb-4">Article Data for article.html</h3>
            <p class="text-slate-600 mb-4">Copy this data and add it to the appropriate object in article.html's getStaticArticle function:</p>
            <textarea id="article-data-code" rows="15" class="input-field font-mono text-sm" readonly></textarea>
            <div class="mt-4 flex gap-4">
                <button class="btn-primary" onclick="copyArticleData()">Copy Article Data</button>
                <button class="btn-primary" onclick="showArticleInstructions()">Show Instructions</button>
            </div>
        </div>

        <!-- Generated Code -->
        <div id="code-section" class="form-section" style="display: none;">
            <h3 class="text-xl font-bold mb-4">Generated HTML Code</h3>
            <p class="text-slate-600 mb-4">Copy and paste this code into your research.html file:</p>
            <textarea id="generated-code" rows="15" class="input-field font-mono text-sm" readonly></textarea>
            <div class="mt-4 flex gap-4">
                <button class="btn-primary" onclick="copyToClipboard()">Copy to Clipboard</button>
                <button class="btn-primary" onclick="downloadHTML()">Download as File</button>
                <button class="btn-primary" onclick="openArticlePreview()">Preview Article</button>
                <button class="btn-primary" onclick="generateArticleData()">Generate Article Data</button>
            </div>
        </div>

        <!-- Instructions -->
        <div class="form-section">
            <h3 class="text-xl font-bold mb-4">ğŸ“ æ·»åŠ æ–°æ–‡ç« å®Œæ•´æµç¨‹</h3>
            
            <div class="bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-lg mb-6">
                <h4 class="font-bold text-lg mb-4 text-indigo-800">ğŸ¯ è¶…ç®€å•æ“ä½œæµç¨‹</h4>
                <div class="space-y-3 text-slate-700">
                    <div class="flex items-start space-x-3">
                        <span class="bg-indigo-100 text-indigo-800 rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold">1</span>
                        <p><strong>å¡«å†™æ–‡ç« ä¿¡æ¯</strong> â†’ æ ‡é¢˜ã€æè¿°ã€å†…å®¹ç­‰å­—æ®µ</p>
                    </div>
                    <div class="flex items-start space-x-3">
                        <span class="bg-indigo-100 text-indigo-800 rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold">2</span>
                        <p><strong>ç‚¹å‡» "Copy Research.html Code"</strong> â†’ å¤åˆ¶å¹¶ç²˜è´´åˆ°research.html</p>
                    </div>
                    <div class="flex items-start space-x-3">
                        <span class="bg-indigo-100 text-indigo-800 rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold">3</span>
                        <p><strong>ç‚¹å‡» "Copy Article.html Code"</strong> â†’ å¤åˆ¶å¹¶ç²˜è´´åˆ°article.html</p>
                    </div>
                    <div class="flex items-start space-x-3">
                        <span class="bg-green-100 text-green-800 rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold">âœ“</span>
                        <p><strong>å®Œæˆï¼</strong> â†’ åˆ·æ–°é¡µé¢æŸ¥çœ‹æ–°æ–‡ç« </p>
                    </div>
                </div>
            </div>

            <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6">
                <h4 class="font-semibold text-yellow-800 mb-2">ğŸ’¡ ä¸¤ä¸ªæŒ‰é’®çš„ä½œç”¨</h4>
                <div class="text-sm text-yellow-700 space-y-2">
                    <p><strong>ğŸ“„ Research.html Code</strong> â†’ ç”Ÿæˆæ–‡ç« å¡ç‰‡æ˜¾ç¤ºä»£ç </p>
                    <p><strong>ğŸ“ Article.html Code</strong> â†’ ç”Ÿæˆæ–‡ç« è¯¦ç»†å†…å®¹æ•°æ®</p>
                    <p class="font-medium">ä¸¤ä¸ªéƒ½éœ€è¦å¤åˆ¶ç²˜è´´ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å‘Šè¯‰æ‚¨ç²˜è´´åˆ°å“ªé‡Œï¼</p>
                </div>
            </div>

            <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-6">
                <h4 class="font-semibold text-blue-800 mb-2">ğŸ“ Research.html ç²˜è´´ä½ç½®</h4>
                <div class="text-sm text-blue-700 space-y-2">
                    <p><strong>ç¥ç»ç§‘å­¦æ–‡ç« </strong> â†’ åœ¨ <code>&lt;div id="articlesGrid"&gt;</code> æ ‡ç­¾å†…æ·»åŠ </p>
                    <p><strong>æ•°å­¦æ–‡ç« </strong> â†’ åœ¨ <code>&lt;div id="mathArticlesGrid"&gt;</code> æ ‡ç­¾å†…æ·»åŠ </p>
                    <p><strong>è¯»ä¹¦ç¬”è®°</strong> â†’ åœ¨ <code>&lt;div id="booksGrid"&gt;</code> æ ‡ç­¾å†…æ·»åŠ </p>
                </div>
            </div>

            <div class="bg-green-50 border-l-4 border-green-400 p-4">
                <h4 class="font-semibold text-green-800 mb-2">ğŸ“„ Article.html ç²˜è´´ä½ç½®</h4>
                <p class="text-sm text-green-700 mb-2">åœ¨ getStaticArticle å‡½æ•°çš„ç›¸åº”å¯¹è±¡ä¸­æ·»åŠ ï¼š</p>
                <div class="text-sm text-green-700 space-y-1">
                    <p><strong>ç¥ç»ç§‘å­¦</strong> â†’ const articles = { ... è¿™é‡Œ ... }</p>
                    <p><strong>æ•°å­¦</strong> â†’ const mathArticles = { ... è¿™é‡Œ ... }</p>
                    <p><strong>è¯»ä¹¦ç¬”è®°</strong> â†’ const bookNotes = { ... è¿™é‡Œ ... }</p>
                </div>
            </div>
        </div>

    </main>

    <script>
        // Simple password protection
        const ADMIN_PASSWORD = 'snow2025'; // è¯·æ›´æ”¹ä¸ºæ‚¨çš„å¯†ç 
        let isAuthenticated = false;
        let currentType = 'neuroscience';

        function checkPassword() {
            const inputPassword = document.getElementById('adminPassword').value;
            const loginError = document.getElementById('loginError');
            
            if (inputPassword === ADMIN_PASSWORD) {
                isAuthenticated = true;
                document.getElementById('loginModal').style.display = 'none';
                document.getElementById('mainContent').style.display = 'block';
                // ä¿å­˜ç™»å½•çŠ¶æ€åˆ°sessionStorage (æµè§ˆå™¨å…³é—­åå¤±æ•ˆ)
                sessionStorage.setItem('adminAuth', 'true');
            } else {
                loginError.style.display = 'block';
                document.getElementById('adminPassword').value = '';
            }
        }

        // æ£€æŸ¥æ˜¯å¦å·²ç»ç™»å½•
        function checkAuthStatus() {
            if (sessionStorage.getItem('adminAuth') === 'true') {
                isAuthenticated = true;
                document.getElementById('loginModal').style.display = 'none';
                document.getElementById('mainContent').style.display = 'block';
            }
        }

        // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥è®¤è¯çŠ¶æ€
        window.addEventListener('load', checkAuthStatus);

        // Enteré”®ç™»å½•
        document.getElementById('adminPassword').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkPassword();
            }
        });

        // Tab functionality
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                currentType = this.dataset.type;
                
                // Show/hide book-specific fields
                const bookFields = document.getElementById('book-fields');
                bookFields.style.display = currentType === 'book' ? 'block' : 'none';
                
                generatePreview();
            });
        });

        function generatePreview() {
            if (!isAuthenticated) return;
            const title = document.getElementById('title').value || 'Sample Title';
            const description = document.getElementById('description').value || 'Sample description text...';
            const content = document.getElementById('content').value || 'Sample content...';
            const tags = document.getElementById('tags').value || 'sample-tag';
            const imageUrl = document.getElementById('imageUrl').value;
            
            let previewHTML = '';
            
            if (currentType === 'book') {
                const author = document.getElementById('author').value || 'Author Name';
                const progress = document.getElementById('progress').value || '25';
                
                previewHTML = `
                    <div class="book-card bg-white rounded-lg p-6 shadow-lg">
                        <div class="w-full h-48 bg-gradient-to-br from-green-100 to-green-200 rounded-lg overflow-hidden mb-4">
                            ${imageUrl ? `<img src="${imageUrl}" alt="${title}" class="w-full h-full object-cover">` : 
                            `<div class="w-full h-full flex items-center justify-center">
                                <svg class="w-16 h-16 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                                </svg>
                            </div>`}
                        </div>
                        <h3 class="text-xl font-bold text-slate-800 mb-2">${title}</h3>
                        <p class="text-sm text-slate-600 mb-2">${author}</p>
                        <p class="text-sm text-slate-500 mb-3">${description}</p>
                        <div class="flex items-center justify-between">
                            <span class="text-xs text-slate-400">Progress: ${progress}%</span>
                            <div class="w-20 bg-gray-200 rounded-full h-2">
                                <div class="bg-green-500 h-2 rounded-full" style="width: ${progress}%"></div>
                            </div>
                        </div>
                    </div>`;
            } else {
                const cardClass = currentType === 'mathematics' ? 'math-article-card' : 'article-card';
                previewHTML = `
                    <div class="${cardClass} rounded-lg p-6 border border-gray-100" data-tags="${tags}">
                        <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-6">
                            <div class="flex-1">
                                <h3 class="text-2xl font-bold text-slate-800 mb-3">${title}</h3>
                                <p class="text-slate-600 mb-4 leading-relaxed">${description}</p>
                                <div class="flex items-center text-sm text-slate-500">
                                    <span>${new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}</span>
                                </div>
                            </div>
                            <div class="w-full md:w-32 h-24 bg-gradient-to-br from-blue-100 to-purple-100 rounded-lg overflow-hidden">
                                ${imageUrl ? `<img src="${imageUrl}" alt="${title}" class="w-full h-full object-cover">` : 
                                `<div class="w-full h-full bg-gradient-to-br from-blue-100 to-purple-100 rounded-lg flex items-center justify-center">
                                    <svg class="w-12 h-12 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                                    </svg>
                                </div>`}
                            </div>
                        </div>
                    </div>`;
            }
            
            document.getElementById('preview').innerHTML = previewHTML;
        }

        function generateCode() {
            if (!isAuthenticated) return;
            const title = document.getElementById('title').value;
            const description = document.getElementById('description').value;
            const tags = document.getElementById('tags').value;
            const imageUrl = document.getElementById('imageUrl').value;
            
            if (!title || !description) {
                alert('Please fill in at least the title and description fields');
                return;
            }
            
            const articleId = title.toLowerCase().replace(/[^a-z0-9]/g, '-').replace(/-+/g, '-').slice(0, 50);
            const currentDate = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });
            
            let code = '';
            
            if (currentType === 'book') {
                const author = document.getElementById('author').value || 'Unknown Author';
                const progress = document.getElementById('progress').value || '0';
                
                code = `                    <div class="book-card bg-white rounded-lg p-6 shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer" onclick="openBookNotes('${articleId}')">
                        <div class="mb-4">
                            <div class="w-full h-48 bg-gradient-to-br from-green-100 to-green-200 rounded-lg overflow-hidden mb-4">
                                ${imageUrl ? `<img src="${imageUrl}" alt="${title}" class="w-full h-full object-cover" 
                                     onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">` : ''}
                                <div class="w-full h-full bg-gradient-to-br from-green-100 to-green-200 rounded-lg flex items-center justify-center"${imageUrl ? ' style="display: none;"' : ''}>
                                    <svg class="w-16 h-16 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                                    </svg>
                                </div>
                            </div>
                            <h3 class="text-xl font-bold text-slate-800 mb-2">${title}</h3>
                            <p class="text-sm text-slate-600 mb-2">${author}</p>
                            <p class="text-sm text-slate-500 mb-3">${description}</p>
                            <div class="flex items-center justify-between">
                                <span class="text-xs text-slate-400">è¿›åº¦: ${progress}%</span>
                                <div class="w-20 bg-gray-200 rounded-full h-2">
                                    <div class="bg-green-500 h-2 rounded-full" style="width: ${progress}%"></div>
                                </div>
                            </div>
                        </div>
                    </div>`;
            } else {
                const cardClass = currentType === 'mathematics' ? 'math-article-card' : 'article-card';
                const functionName = currentType === 'mathematics' ? 'openMathArticle' : 'openArticle';
                
                code = `                    <div class="${cardClass} rounded-lg p-6 border border-gray-100" data-tags="${tags}" onclick="${functionName}('${articleId}')">
                        <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-6">
                            <div class="flex-1">
                                <h3 class="text-2xl font-bold text-slate-800 hover:text-sky-600 transition-colors mb-3">
                                    ${title}
                                </h3>
                                <p class="text-slate-600 mb-4 leading-relaxed">
                                    ${description}
                                </p>
                                <div class="flex items-center text-sm text-slate-500">
                                    <span>${currentDate}</span>
                                </div>
                            </div>
                            <div class="w-full md:w-32 h-24 bg-gradient-to-br from-blue-100 to-purple-100 rounded-lg overflow-hidden">
                                ${imageUrl ? `<img src="${imageUrl}" alt="${title}" class="w-full h-full object-cover" 
                                     onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">` : ''}
                                <div class="w-full h-full bg-gradient-to-br from-blue-100 to-purple-100 rounded-lg flex items-center justify-center"${imageUrl ? ' style="display: none;"' : ''}>
                                    <svg class="w-12 h-12 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                                    </svg>
                                </div>
                            </div>
                        </div>
                    </div>`;
            }
            
            document.getElementById('generated-code').value = code;
            document.getElementById('code-section').style.display = 'block';
            document.getElementById('code-section').scrollIntoView({ behavior: 'smooth' });
        }

        function copyToClipboard() {
            const codeTextarea = document.getElementById('generated-code');
            codeTextarea.select();
            document.execCommand('copy');
            alert('Code copied to clipboard!');
        }

        function downloadHTML() {
            const code = document.getElementById('generated-code').value;
            const blob = new Blob([code], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'new-content.html';
            a.click();
            URL.revokeObjectURL(url);
        }

        // Remove Firebase save functionality - not needed for static approach
        function saveToFirebase() {
            alert('This static version doesn\'t need Firebase! Just use the "Generate HTML" feature to get your code, then copy it to your research.html file. This approach is faster, more reliable, and doesn\'t require any external services.');
        }

        // Open article preview in new tab
        function openArticlePreview() {
            const title = document.getElementById('title').value;
            if (!title) {
                alert('Please enter a title first');
                return;
            }
            
            const articleId = title.toLowerCase().replace(/[^a-z0-9]/g, '-').replace(/-+/g, '-').slice(0, 50);
            const type = currentType === 'book' ? 'book-notes' : 'article';
            const url = `article.html?id=${articleId}&type=${type}`;
            window.open(url, '_blank');
        }

        // Enhanced generate code function
        function generateCode() {
            if (!isAuthenticated) return;
            const title = document.getElementById('title').value;
            const description = document.getElementById('description').value;
            const content = document.getElementById('content').value;
            const tags = document.getElementById('tags').value;
            const imageUrl = document.getElementById('imageUrl').value;
            
            if (!title || !description) {
                alert('Please fill in at least the title and description fields');
                return;
            }
            
            const articleId = title.toLowerCase().replace(/[^a-z0-9]/g, '-').replace(/-+/g, '-').slice(0, 50);
            const currentDate = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });
            
            let code = '';
            
            if (currentType === 'book') {
                const author = document.getElementById('author').value || 'Unknown Author';
                const progress = document.getElementById('progress').value || '0';
                
                code = `                    <div class="book-card bg-white rounded-lg p-6 shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer" onclick="openBookNotes('${articleId}')">
                        <div class="mb-4">
                            <div class="w-full h-48 bg-gradient-to-br from-green-100 to-green-200 rounded-lg overflow-hidden mb-4">
                                ${imageUrl ? `<img src="${imageUrl}" alt="${title}" class="w-full h-full object-cover" 
                                     onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">` : ''}
                                <div class="w-full h-full bg-gradient-to-br from-green-100 to-green-200 rounded-lg flex items-center justify-center"${imageUrl ? ' style="display: none;"' : ''}>
                                    <svg class="w-16 h-16 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                                    </svg>
                                </div>
                            </div>
                            <h3 class="text-xl font-bold text-slate-800 mb-2">${title}</h3>
                            <p class="text-sm text-slate-600 mb-2">${author}</p>
                            <p class="text-sm text-slate-500 mb-3">${description}</p>
                            <div class="flex items-center justify-between">
                                <span class="text-xs text-slate-400">è¿›åº¦: ${progress}%</span>
                                <div class="w-20 bg-gray-200 rounded-full h-2">
                                    <div class="bg-green-500 h-2 rounded-full" style="width: ${progress}%"></div>
                                </div>
                            </div>
                        </div>
                    </div>`;
            } else {
                const cardClass = currentType === 'mathematics' ? 'math-article-card' : 'article-card';
                const functionName = currentType === 'mathematics' ? 'openMathArticle' : 'openArticle';
                
                code = `                    <div class="${cardClass} rounded-lg p-6 border border-gray-100" data-tags="${tags}" onclick="${functionName}('${articleId}')">
                        <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-6">
                            <div class="flex-1">
                                <h3 class="text-2xl font-bold text-slate-800 hover:text-sky-600 transition-colors mb-3">
                                    ${title}
                                </h3>
                                <p class="text-slate-600 mb-4 leading-relaxed">
                                    ${description}
                                </p>
                                <div class="flex items-center text-sm text-slate-500">
                                    <span>${currentDate}</span>
                                </div>
                            </div>
                            <div class="w-full md:w-32 h-24 bg-gradient-to-br from-blue-100 to-purple-100 rounded-lg overflow-hidden">
                                ${imageUrl ? `<img src="${imageUrl}" alt="${title}" class="w-full h-full object-cover" 
                                     onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">` : ''}
                                <div class="w-full h-full bg-gradient-to-br from-blue-100 to-purple-100 rounded-lg flex items-center justify-center"${imageUrl ? ' style="display: none;"' : ''}>
                                    <svg class="w-12 h-12 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                                    </svg>
                                </div>
                            </div>
                        </div>
                    </div>`;
            }
            
            document.getElementById('generated-code').value = code;
            document.getElementById('code-section').style.display = 'block';
            document.getElementById('code-section').scrollIntoView({ behavior: 'smooth' });
        }

        // Generate article data for article.html
        // Generate Research.html code
        function generateResearchCode() {
            const title = document.getElementById('title').value;
            const description = document.getElementById('description').value;
            const tags = document.getElementById('tags').value;
            const imageUrl = document.getElementById('imageUrl').value;
            
            if (!title || !description) {
                alert('è¯·è‡³å°‘å¡«å†™æ ‡é¢˜å’Œæè¿°å­—æ®µ');
                return;
            }
            
            const articleId = title.toLowerCase().replace(/[^a-z0-9]/g, '-').replace(/-+/g, '-').slice(0, 50);
            const currentDate = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });
            
            let researchCode = '';
            
            if (currentType === 'book') {
                const author = document.getElementById('author').value || 'Unknown Author';
                const progress = document.getElementById('progress').value || '0';
                
                researchCode = `                    <div class="book-card bg-white rounded-lg p-6 shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer" onclick="openBookNotes('${articleId}')">
                        <div class="mb-4">
                            <div class="w-full h-48 bg-gradient-to-br from-green-100 to-green-200 rounded-lg overflow-hidden mb-4">
                                ${imageUrl ? `<img src="${imageUrl}" alt="${title}" class="w-full h-full object-cover" 
                                     onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">` : ''}
                                <div class="w-full h-full bg-gradient-to-br from-green-100 to-green-200 rounded-lg flex items-center justify-center"${imageUrl ? ' style="display: none;"' : ''}>
                                    <svg class="w-16 h-16 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                                    </svg>
                                </div>
                            </div>
                            <h3 class="text-xl font-bold text-slate-800 mb-2">${title}</h3>
                            <p class="text-sm text-slate-600 mb-2">${author}</p>
                            <p class="text-sm text-slate-500 mb-3">${description}</p>
                            <div class="flex items-center justify-between">
                                <span class="text-xs text-slate-400">è¿›åº¦: ${progress}%</span>
                                <div class="w-20 bg-gray-200 rounded-full h-2">
                                    <div class="bg-green-500 h-2 rounded-full" style="width: ${progress}%"></div>
                                </div>
                            </div>
                        </div>
                    </div>`;
            } else {
                const cardClass = currentType === 'mathematics' ? 'math-article-card' : 'article-card';
                const functionName = currentType === 'mathematics' ? 'openMathArticle' : 'openArticle';
                
                researchCode = `                    <div class="${cardClass} rounded-lg p-6 border border-gray-100" data-tags="${tags}" onclick="${functionName}('${articleId}')">
                        <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-6">
                            <div class="flex-1">
                                <h3 class="text-2xl font-bold text-slate-800 hover:text-sky-600 transition-colors mb-3">
                                    ${title}
                                </h3>
                                <p class="text-slate-600 mb-4 leading-relaxed">
                                    ${description}
                                </p>
                                <div class="flex items-center text-sm text-slate-500">
                                    <span>${currentDate}</span>
                                </div>
                            </div>
                            <div class="w-full md:w-32 h-24 bg-gradient-to-br from-blue-100 to-purple-100 rounded-lg overflow-hidden">
                                ${imageUrl ? `<img src="${imageUrl}" alt="${title}" class="w-full h-full object-cover" 
                                     onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">` : ''}
                                <div class="w-full h-full bg-gradient-to-br from-blue-100 to-purple-100 rounded-lg flex items-center justify-center"${imageUrl ? ' style="display: none;"' : ''}>
                                    <svg class="w-12 h-12 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                                    </svg>
                                </div>
                            </div>
                        </div>
                    </div>`;
            }
            
            document.getElementById('research-code').value = researchCode;
            document.getElementById('research-code-section').style.display = 'block';
            document.getElementById('research-code-section').scrollIntoView({ behavior: 'smooth' });
        }

        // Generate Article.html code
        function generateArticleCode() {
            const title = document.getElementById('title').value;
            const description = document.getElementById('description').value;
            const content = document.getElementById('content').value;
            const tags = document.getElementById('tags').value;
            const imageUrl = document.getElementById('imageUrl').value;
            
            if (!title || !description || !content) {
                alert('è¯·å¡«å†™æ ‡é¢˜ã€æè¿°å’Œå†…å®¹å­—æ®µ');
                return;
            }
            
            const articleId = title.toLowerCase().replace(/[^a-z0-9]/g, '-').replace(/-+/g, '-').slice(0, 50);
            const currentDate = new Date().toISOString().split('T')[0];
            
            let articleCode = '';
            
            if (currentType === 'book') {
                const author = document.getElementById('author').value || 'Unknown Author';
                const progress = document.getElementById('progress').value || '0';
                
                articleCode = `'${articleId}': {
    title: '${title}',
    description: '${description}',
    author: '${author}',
    progress: ${progress},
    content: \`${content.replace(/`/g, '\\`')}\`,
    date: 'æœ€åæ›´æ–°: ${currentDate}',
    category: 'Book Notes',
    tags: [${tags.split(',').map(tag => `'${tag.trim()}'`).join(', ')}],
    readTime: '${Math.ceil(content.split(' ').length / 200)} min read'
}`;
            } else {
                const category = currentType === 'mathematics' ? 'Mathematics' : 'Neuroscience';
                
                articleCode = `'${articleId}': {
    title: '${title}',
    description: '${description}',
    content: \`${content.replace(/`/g, '\\`')}\`,
    date: '${currentDate}',
    category: '${category}',
    tags: [${tags.split(',').map(tag => `'${tag.trim()}'`).join(', ')}],
    readTime: '${Math.ceil(content.split(' ').length / 200)} min read'
}`;
            }
            
            document.getElementById('article-code').value = articleCode;
            document.getElementById('article-code-section').style.display = 'block';
            document.getElementById('article-code-section').scrollIntoView({ behavior: 'smooth' });
        }

        // Copy functions
        function copyResearchCode() {
            const codeTextarea = document.getElementById('research-code');
            codeTextarea.select();
            document.execCommand('copy');
            alert('Research.html ä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
        }

        function copyArticleCode() {
            const codeTextarea = document.getElementById('article-code');
            codeTextarea.select();
            document.execCommand('copy');
            alert('Article.html ä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
        }

        // Instructions functions
        function showResearchInstructions() {
            let location = '';
            if (currentType === 'neuroscience') {
                location = 'åœ¨ research.html ä¸­æ‰¾åˆ° <div id="articlesGrid"> åŒºåŸŸï¼Œå°†ä»£ç ç²˜è´´åˆ°å…¶ä¸­';
            } else if (currentType === 'mathematics') {
                location = 'åœ¨ research.html ä¸­æ‰¾åˆ° <div id="mathArticlesGrid"> åŒºåŸŸï¼Œå°†ä»£ç ç²˜è´´åˆ°å…¶ä¸­';
            } else if (currentType === 'book') {
                location = 'åœ¨ research.html ä¸­æ‰¾åˆ° <div id="booksGrid"> åŒºåŸŸï¼Œå°†ä»£ç ç²˜è´´åˆ°å…¶ä¸­';
            }
            
            alert(`ğŸ“ ç²˜è´´ä½ç½®è¯´æ˜ï¼š\n\n${location}\n\nğŸ’¡ æç¤ºï¼šåœ¨ç°æœ‰æ–‡ç« ä¹‹åæ·»åŠ æ–°çš„æ–‡ç« ä»£ç å³å¯ã€‚`);
        }

        function showArticleInstructions() {
            let objectName = '';
            if (currentType === 'neuroscience') {
                objectName = 'articles';
            } else if (currentType === 'mathematics') {
                objectName = 'mathArticles';
            } else if (currentType === 'book') {
                objectName = 'bookNotes';
            }
            
            alert(`ğŸ“ ç²˜è´´ä½ç½®è¯´æ˜ï¼š\n\nåœ¨ article.html æ–‡ä»¶ä¸­æ‰¾åˆ° getStaticArticle å‡½æ•°ï¼Œç„¶ååœ¨ ${objectName} å¯¹è±¡ä¸­æ·»åŠ å¤åˆ¶çš„ä»£ç ã€‚\n\nç¤ºä¾‹ï¼š\nconst ${objectName} = {\n    'existing-article': { ... },\n    // åœ¨è¿™é‡Œç²˜è´´æ–°çš„æ–‡ç« æ•°æ®\n};\n\nğŸ’¡ æ³¨æ„ï¼šç¡®ä¿åœ¨å¯¹è±¡çš„æœ€åä¸€ä¸ªå…ƒç´ åæ·»åŠ é€—å·ã€‚`);
        }

        function generateArticleData() {
            const title = document.getElementById('title').value;
            const description = document.getElementById('description').value;
            const content = document.getElementById('content').value;
            const tags = document.getElementById('tags').value;
            const imageUrl = document.getElementById('imageUrl').value;
            
            if (!title || !description || !content) {
                alert('Please fill in title, description, and content fields first');
                return;
            }
            
            const articleId = title.toLowerCase().replace(/[^a-z0-9]/g, '-').replace(/-+/g, '-').slice(0, 50);
            const currentDate = new Date().toISOString().split('T')[0]; // YYYY-MM-DD format
            
            let articleData = '';
            
            if (currentType === 'book') {
                const author = document.getElementById('author').value || 'Unknown Author';
                const progress = document.getElementById('progress').value || '0';
                
                articleData = `'${articleId}': {
    title: '${title}',
    description: '${description}',
    author: '${author}',
    progress: ${progress},
    content: \`${content.replace(/`/g, '\\`')}\`,
    date: 'æœ€åæ›´æ–°: ${currentDate}',
    category: 'Book Notes',
    tags: [${tags.split(',').map(tag => `'${tag.trim()}'`).join(', ')}],
    readTime: '${Math.ceil(content.split(' ').length / 200)} min read'
}`;
            } else {
                const category = currentType === 'mathematics' ? 'Mathematics' : 'Neuroscience';
                
                articleData = `'${articleId}': {
    title: '${title}',
    description: '${description}',
    content: \`${content.replace(/`/g, '\\`')}\`,
    date: '${currentDate}',
    category: '${category}',
    tags: [${tags.split(',').map(tag => `'${tag.trim()}'`).join(', ')}],
    readTime: '${Math.ceil(content.split(' ').length / 200)} min read'
}`;
            }
            
            document.getElementById('article-data-code').value = articleData;
            document.getElementById('article-data-section').style.display = 'block';
            document.getElementById('article-data-section').scrollIntoView({ behavior: 'smooth' });
        }
        
        function copyArticleData() {
            const dataTextarea = document.getElementById('article-data-code');
            dataTextarea.select();
            document.execCommand('copy');
            alert('Article data copied to clipboard!');
        }
        
        function showArticleInstructions() {
            alert(`å°†å¤åˆ¶çš„æ•°æ®æ·»åŠ åˆ° article.html æ–‡ä»¶ä¸­ï¼š

1. æ‰“å¼€ article.html æ–‡ä»¶
2. æ‰¾åˆ° getStaticArticle å‡½æ•°
3. æ ¹æ®æ–‡ç« ç±»å‹æ·»åŠ åˆ°å¯¹åº”ä½ç½®ï¼š
   - ç¥ç»ç§‘å­¦: articles å¯¹è±¡ä¸­
   - æ•°å­¦: mathArticles å¯¹è±¡ä¸­  
   - è¯»ä¹¦ç¬”è®°: bookNotes å¯¹è±¡ä¸­
4. ä¿å­˜æ–‡ä»¶

ç¤ºä¾‹ä½ç½®ï¼š
const articles = {
    'existing-article': { ... },
    // åœ¨è¿™é‡Œç²˜è´´æ–°çš„æ–‡ç« æ•°æ®
};`);
        }
    </script>

</body>
</html>